!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("d3")):"function"==typeof define&&define.amd?define(["React","d3"],t):"object"==typeof exports?exports.ReStock=t(require("React"),require("d3")):e.ReStock=t(e.React,e.d3)}(this,function(e,t){return function(e){function t(s){if(r[s])return r[s].exports;var o=r[s]={exports:{},id:s,loaded:!1};return e[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="js/",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";t.ChartCanvas=r(2),t.DataTransform=r(3),t.XAxis=r(4),t.YAxis=r(5),t.Chart=r(6),t.DataSeries=r(7),t.AreaSeries=r(8),t.LineSeries=r(9),t.CandlestickSeries=r(10),t.OverlaySeries=r(11),t.HistogramSeries=r(12),t.EventCapture=r(13),t.MouseCoordinates=r(14),t.CrossHair=r(15),t.VerticalMousePointer=r(16),t.CurrentCoordinate=r(17),t.TooltipContainer=r(18),t.OHLCTooltip=r(19),t.MovingAverageTooltip=r(20),t.EdgeContainer=r(21),t.EdgeIndicator=r(22)},function(e,t,r){"use strict";var s=r(23),o=(r(6),r(25)),i=r(26),n=s.createClass({displayName:"ChartCanvas",mixins:[i,o],propTypes:{width:s.PropTypes.number.isRequired,height:s.PropTypes.number.isRequired,margin:s.PropTypes.object,interval:s.PropTypes.string.isRequired},getAvailableHeight:function(e){return e.height-e.margin.top-e.margin.bottom},getAvailableWidth:function(e){return e.width-e.margin.left-e.margin.right},getInitialState:function(){return{}},getDefaultProps:function(){return{margin:{top:20,right:30,bottom:30,left:80},interval:"D"}},renderChildren:function(){var e=s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;var t=e;return"ReStock.DataTransform"===t.props.namespace&&(t=s.addons.cloneWithProps(t,{data:this.props.data,interval:this.props.interval})),s.addons.cloneWithProps(t,{_width:this.getAvailableWidth(this.props),_height:this.getAvailableHeight(this.props)})}.bind(this));return this._renderChildren(e)},render:function(){var e="translate("+this.props.margin.left+","+this.props.margin.top+")",t='<clipPath id="chart-area-clip"><rect x="0" y="0" width="'+this.getAvailableWidth(this.props)+'" height="'+this.getAvailableHeight(this.props)+'" /></clipPath>',r=this.renderChildren();return s.createElement("svg",{width:this.props.width,height:this.props.height},s.createElement("defs",{dangerouslySetInnerHTML:{__html:t}}),s.createElement("g",{transform:e},r))}});e.exports=n},function(e,t,r){"use strict";var s=r(23),o=r(25),i=r(26),n=r(27),a=(r(28),["transformType","options","children","namespace"]),p=s.createClass({displayName:"DataTransform",mixins:[n,i,o],propTypes:{_height:s.PropTypes.number,_width:s.PropTypes.number,data:s.PropTypes.array.isRequired,transformType:s.PropTypes.string.isRequired,options:s.PropTypes.object},getInitialState:function(){return{}},getDefaultProps:function(){return{namespace:"ReStock.DataTransform",transformType:"none"}},renderChildren:function(){var e=s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;var t=e,r={};return Object.keys(this.props).filter(function(e){return-1===a.indexOf(e)}).forEach(function(e){return r[e]=this.props[e]}.bind(this)),Object.keys(this.state.passThroughProps).forEach(function(e){return r[e]=this.state.passThroughProps[e]}.bind(this)),s.addons.cloneWithProps(t,r)}.bind(this));return this._renderChildren(e)},render:function(){return s.createElement("g",null,this.renderChildren())}});e.exports=p},function(e,t,r){"use strict";var s=r(23),o=r(24),i=r(29),n=s.createClass({displayName:"XAxis",mixins:[i],propTypes:{axisAt:s.PropTypes.oneOfType([s.PropTypes.oneOf(["top","bottom","middle"]),s.PropTypes.number]).isRequired,orient:s.PropTypes.oneOf(["top","bottom"]).isRequired,innerTickSize:s.PropTypes.number,outerTickSize:s.PropTypes.number,tickFormat:s.PropTypes.func,tickPadding:s.PropTypes.number,tickSize:s.PropTypes.number,ticks:s.PropTypes.number,tickValues:s.PropTypes.array},getDefaultProps:function(){return{namespace:"ReStock.XAxis",showGrid:!1}},getInitialState:function(){return{}},componentWillMount:function(){this.state.xAxis=o.svg.axis()},componentDidMount:function(){this.updateAxis()},componentDidUpdate:function(){this.updateAxis()},updateAxis:function(){var e=o.svg.axis().scale(this.props._xScale).orient(this.props.orient);this.props.orient&&e.orient(this.props.orient),this.props.innerTickSize&&e.innerTickSize(this.props.innerTickSize),this.props.outerTickSize&&e.outerTickSize(this.props.outerTickSize),this.props.tickFormat&&(this.props._xScale.isPolyLinear&&this.props._xScale.isPolyLinear()?console.warn("Cannot set tickFormat on a poly linear scale, ignoring tickFormat on XAxis"):e.tickFormat(this.props.tickFormat)),this.props.tickPadding&&e.tickPadding(this.props.tickPadding),this.props.tickSize&&e.tickSize(this.props.tickSize),this.props.ticks&&e.ticks(this.props.ticks),this.props.tickValues&&e.tickValues(this.props.tickValues),o.select(this.getDOMNode()).call(e)},render:function(){var e=this.props.axisAt,t=this.props._yScale.range();return"top"===this.props.axisAt&&(e=Math.min(t[0],t[1])),"bottom"===this.props.axisAt&&(e=Math.max(t[0],t[1])),"middle"===this.props.axisAt&&(e=(t[0]+t[1])/2),s.createElement("g",{className:"x axis",transform:"translate(0, "+e+")"})}});e.exports=n},function(e,t,r){"use strict";var s=r(23),o=r(24),i=r(29),n=s.createClass({displayName:"YAxis",mixins:[i],propTypes:{axisAt:s.PropTypes.oneOfType([s.PropTypes.oneOf(["left","right","middle"]),s.PropTypes.number]).isRequired,orient:s.PropTypes.oneOf(["left","right"]).isRequired,innerTickSize:s.PropTypes.number,outerTickSize:s.PropTypes.number,tickFormat:s.PropTypes.func,tickPadding:s.PropTypes.number,tickSize:s.PropTypes.number,ticks:s.PropTypes.number,tickValues:s.PropTypes.array,percentScale:s.PropTypes.bool,axisPadding:s.PropTypes.number},getDefaultProps:function(){return{namespace:"ReStock.YAxis",showGrid:!1,axisPadding:0}},getInitialState:function(){return{}},componentDidMount:function(){this.updateAxis()},componentDidUpdate:function(){this.updateAxis()},updateAxis:function(){var e=this.props._yScale;this.props.percentScale&&(e=e.copy().domain([0,1]));var t=o.svg.axis().scale(e).orient(this.props.orient);this.props.orient&&t.orient(this.props.orient),this.props.innerTickSize&&t.innerTickSize(this.props.innerTickSize),this.props.outerTickSize&&t.outerTickSize(this.props.outerTickSize),this.props.tickFormat&&t.tickFormat(this.props.tickFormat),this.props.tickPadding&&t.tickPadding(this.props.tickPadding),this.props.tickSize&&t.tickSize(this.props.tickSize),this.props.ticks&&t.ticks(this.props.ticks),this.props.tickValues&&t.tickValues(this.props.tickValues),o.select(this.getDOMNode()).call(t)},render:function(){var e=this.props.axisAt,t=this.props._xScale.range();return"left"===this.props.axisAt&&(e=Math.min(t[0],t[1])+this.props.axisPadding),"right"===this.props.axisAt&&(e=Math.max(t[0],t[1])+this.props.axisPadding),"middle"===this.props.axisAt&&(e=(t[0]+t[1])/2+this.props.axisPadding),s.createElement("g",{className:"y axis",transform:"translate("+e+", 0)"})}});e.exports=n},function(e,t,r){"use strict";var s=r(23),o=(r(24),r(30),r(31),r(32)),i=(o.overlayColors,o.pluck,o.keysAsArray,s.createClass({displayName:"Chart",statics:{getWidth:function(e){return e.width||e._width},getHeight:function(e){return e.height||e._height}},propTypes:{data:s.PropTypes.array.isRequired,height:s.PropTypes.number,width:s.PropTypes.number,origin:s.PropTypes.oneOfType([s.PropTypes.array,s.PropTypes.func]).isRequired,id:s.PropTypes.number.isRequired,_height:s.PropTypes.number,_width:s.PropTypes.number,xScale:s.PropTypes.func,yScale:s.PropTypes.func,xDomainUpdate:s.PropTypes.bool,yDomainUpdate:s.PropTypes.bool,_chartData:s.PropTypes.object.isRequired,_updateMode:s.PropTypes.object.isRequired},mixins:[s.addons.PureRenderMixin],getDefaultProps:function(){return{namespace:"ReStock.Chart",transformDataAs:"none",yDomainUpdate:!0,origin:[0,0]}},renderChildren:function(){return s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;if(["ReStock.DataSeries","ReStock.ChartOverlay","ReStock.XAxis","ReStock.YAxis"].indexOf(e.props.namespace)<0)return e;var t=e;return t=s.addons.cloneWithProps(t,{_xScale:this.props._chartData.scales.xScale,_yScale:this.props._chartData.scales.yScale,data:this.props.data,_xAccessor:this.props._indexAccessor}),t=this.updatePropsForDataSeries(t),void 0!==t.props.xAccessor&&this.props._stockScale&&(console.warn("xAccessor defined in DataSeries will override the indexAccessor of the polylinear scale. This might not be the right configuration"),console.warn("Either remove the xAccessor configuration on the DataSeries or change the polyLinear=false in Translate")),t}.bind(this),this)},updatePropsForDataSeries:function(e){return"ReStock.DataSeries"===e.props.namespace?s.addons.cloneWithProps(e,{_overlays:this.props._chartData.overlays,_updateMode:this.props._updateMode,_pan:this.props._pan,_isMainChart:this.props._isMainChart}):e},render:function(){var e=this.props._height,t=this.props._width,r="function"==typeof this.props.origin?this.props.origin(t,e):this.props.origin,o="translate("+r[0]+","+r[1]+")";return this.props._pan&&!this.props._isMainChart?s.createElement("g",null):s.createElement("g",{transform:o},this.renderChildren())}}));e.exports=i},function(e,t,r){"use strict";function s(e,t){return e.map(function(e){return[e.id,e]}).filter(function(e){return e[0]===t}).map(function(e){return e[1]})[0]}var o=r(23),i=r(29),n=r(32),a=(r(24),r(31),n.overlayColors,o.createClass({displayName:"DataSeries",mixins:[i],propTypes:{xAccessor:o.PropTypes.func,_xAccessor:o.PropTypes.func,yAccessor:o.PropTypes.func.isRequired,_xScale:o.PropTypes.func,_yScale:o.PropTypes.func,_overlays:o.PropTypes.array,_updateMode:o.PropTypes.object},getDefaultProps:function(){return{namespace:"ReStock.DataSeries"}},renderChildren:function(){var e=o.Children.map(this.props.children,function(e){var t=e;if("string"==typeof e.type)return t;if(/Series$/.test(t.props.namespace)&&(t=o.addons.cloneWithProps(t,{_xScale:this.props._xScale,_yScale:this.props._yScale,_xAccessor:this.props.xAccessor||this.props._xAccessor,_yAccessor:this.props.yAccessor,data:this.props.data}),/OverlaySeries$/.test(t.props.namespace))){var r=(t.props.id,s(this.props._overlays,t.props.id));t=o.addons.cloneWithProps(t,{_overlay:r,_pan:this.props._pan,_isMainChart:this.props._isMainChart})}return t}.bind(this),this);return e},render:function(){return o.createElement("g",{style:{clipPath:"url(#chart-area-clip)"}},this.renderChildren())}}));e.exports=a},function(e,t,r){"use strict";var s=r(23),o=r(24),i=r(29),n=s.createClass({displayName:"AreaSeries",mixins:[i],propTypes:{_xScale:s.PropTypes.func.isRequired,_yScale:s.PropTypes.func.isRequired,_xAccessor:s.PropTypes.func.isRequired,_yAccessor:s.PropTypes.func.isRequired,data:s.PropTypes.array.isRequired},getDefaultProps:function(){return{namespace:"ReStock.AreaSeries"}},getPath:function(){var e=this.props,t=o.svg.line().defined(function(t){return void 0!==e._yAccessor(t)}).x(function(t){return e._xScale(e._xAccessor(t))}).y(function(t){return e._yScale(e._yAccessor(t))});return t(e.data)},getArea:function(){var e=this.props,t=e._yScale.range()[0],r=o.svg.area().defined(function(t){return void 0!==e._yAccessor(t)}).x(function(t){return e._xScale(e._xAccessor(t))}).y0(t-1).y1(function(t){return e._yScale(e._yAccessor(t))});return r(e.data)},render:function(){return s.createElement("g",null,s.createElement("path",{d:this.getPath(),className:"line line-stroke"}),s.createElement("path",{d:this.getArea(),className:"area"}))}});e.exports=n},function(e,t,r){"use strict";var s=r(23),o=r(24),i=(r(29),s.createClass({displayName:"LineSeries",propTypes:{_xScale:s.PropTypes.func.isRequired,_yScale:s.PropTypes.func.isRequired,_xAccessor:s.PropTypes.func.isRequired,_yAccessor:s.PropTypes.func.isRequired,data:s.PropTypes.array.isRequired,className:s.PropTypes.string,stroke:s.PropTypes.string},getDefaultProps:function(){return{namespace:"ReStock.LineSeries",className:"line "}},getPath:function(){var e=this.props,t=o.svg.line().defined(function(t){return void 0!==e._yAccessor(t)}).x(function(t){return e._xScale(e._xAccessor(t))}).y(function(t){return e._yScale(e._yAccessor(t))});return t(e.data)},render:function(){var e=this.props.className.concat(void 0!==this.props.stroke?"":" line-stroke");return s.createElement("g",null,s.createElement("path",{d:this.getPath(),stroke:this.props.stroke,fill:"none",className:e}))}}));e.exports=i},function(e,t,r){"use strict";var s=r(23),o=(r(24),r(29)),i=s.createClass({displayName:"CandlestickSeries",mixins:[o],propTypes:{_xScale:s.PropTypes.func.isRequired,_yScale:s.PropTypes.func.isRequired,_xAccessor:s.PropTypes.func.isRequired,_yAccessor:s.PropTypes.func.isRequired},statics:{yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}}},getDefaultProps:function(){return{namespace:"ReStock.CandlestickSeries"}},getWicks:function(){var e=this.props.data.filter(function(e){return void 0!==e.close}).map(function(e,t){var r=this.props._yAccessor(e),o=Math.round(this.props._xScale(this.props._xAccessor(e))),i=this.props._yScale(r.high),n=o,a=this.props._yScale(r.low),p=r.open>=r.close?"up":"down";return s.createElement("line",{key:t,className:p,x1:o,y1:i,x2:n,y2:a})},this);return e},getCandles:function(){var e=this.props._xScale(this.props._xAccessor(this.props.data[this.props.data.length-1]))-this.props._xScale(this.props._xAccessor(this.props.data[0])),t=e/this.props.data.length*.5,r=Math.floor(t)%2===0?Math.floor(t):Math.round(t),o=this.props.data.filter(function(e){return void 0!==e.close}).map(function(e,t){var o=this.props._yAccessor(e),i=Math.round(this.props._xScale(this.props._xAccessor(e)))-(1===r?0:.5*r),n=this.props._yScale(Math.max(o.open,o.close)),a=Math.abs(this.props._yScale(o.open)-this.props._yScale(o.close)),p=o.open<=o.close?"up":"down";return o.open===o.close?s.createElement("line",{key:t,x1:i,y1:n,x2:i+r,y2:n}):1>=r?s.createElement("line",{className:p,key:t,x1:i,y1:n,x2:i,y2:n+a}):s.createElement("rect",{key:t,className:p,x:i,y:n,width:r,height:a})},this);return o},render:function(){return s.createElement("g",null,s.createElement("g",{className:"wick",key:"wicks"},this.getWicks()),s.createElement("g",{className:"candle",key:"candles"},this.getCandles()))}});e.exports=i},function(e,t,r){"use strict";var s=r(23),o=r(29),i=(r(32),r(31),s.createClass({displayName:"OverlaySeries",mixins:[o],propTypes:{_xScale:s.PropTypes.func.isRequired,_yScale:s.PropTypes.func.isRequired,_xAccessor:s.PropTypes.func.isRequired,_overlay:s.PropTypes.object.isRequired,data:s.PropTypes.array.isRequired,type:s.PropTypes.oneOf(["sma","ema"]),options:s.PropTypes.object.isRequired,id:s.PropTypes.number.isRequired,stroke:s.PropTypes.string},getDefaultProps:function(){return{namespace:"ReStock.OverlaySeries"}},componentWillUnMount:function(){console.log("componentWillUnMount"),console.log("componentWillUnMount"),console.log("componentWillUnMount"),console.log("componentWillUnMount"),console.log("componentWillUnMount"),this.props._overlay.set(null)},componentWillReceiveProps:function(e){this.props.options!==e.options&&(console.log("updating props....."),this.props._overlay.set("options",e.options))},renderChildren:function(){return s.Children.map(this.props.children,function(e){var t=e;return"string"==typeof e.type?t:(/Series$/.test(t.props.namespace)&&(t=s.addons.cloneWithProps(t,{_xScale:this.props._xScale,_yScale:this.props._yScale,_xAccessor:this.props.xAccessor||this.props._xAccessor,_yAccessor:this.props._overlay.yAccessor,data:this.props.data,stroke:this.props._overlay.stroke,className:"overlay"})),t)}.bind(this),this)},render:function(){return void 0===this.props._overlay.yAccessor?null:this.props._pan&&this.props._isMainChart?s.createElement("g",null):s.createElement("g",null,this.renderChildren())}}));e.exports=i},function(e,t,r){"use strict";var s=r(23),o=(r(24),r(29)),i=s.createClass({displayName:"HistogramSeries",mixins:[o],propTypes:{_xScale:s.PropTypes.func.isRequired,_yScale:s.PropTypes.func.isRequired,_xAccessor:s.PropTypes.func.isRequired,_yAccessor:s.PropTypes.func.isRequired,baseAt:s.PropTypes.oneOfType([s.PropTypes.oneOf(["top","bottom","middle"]),s.PropTypes.number]).isRequired,direction:s.PropTypes.oneOf(["up","down"]).isRequired,className:s.PropTypes.oneOfType([s.PropTypes.func,s.PropTypes.string]).isRequired},getDefaultProps:function(){return{namespace:"ReStock.HistogramSeries",baseAt:"bottom",direction:"up",className:"bar"}},getBars:function(){var e="top"===this.props.baseAt?0:"bottom"===this.props.baseAt?this.props._yScale.range()[0]:"middle"===this.props.baseAt?(this.props._yScale.range()[0]+this.props._yScale.range()[1])/2:this.props.baseAt,t="up"===this.props.direction?-1:1,r=function(){return this.props.className}.bind(this);"function"==typeof this.props.className&&(r=this.props.className);var o=Math.abs(this.props._xScale.range()[0]-this.props._xScale.range()[1]),i=o/this.props.data.length*.5,n=this.props.data.filter(function(e){return void 0!==this.props._yAccessor(e)}.bind(this)).map(function(o,n){var a,p,c=this.props._yAccessor(o),u=Math.round(this.props._xScale(this.props._xAccessor(o)))-.5*i,h=r(o);return t>0?(a=e,p=this.props._yScale.range()[0]-this.props._yScale(c)):(a=this.props._yScale(c),p=e-a),Math.round(i)<=1?s.createElement("line",{key:n,className:h,x1:Math.round(u),y1:Math.round(a),x2:Math.round(u),y2:Math.round(a+p)}):s.createElement("rect",{key:n,className:h,x:Math.round(u),y:Math.round(a),width:Math.round(i),height:Math.round(p)})}.bind(this),this);return n},render:function(){return s.createElement("g",{className:"histogram"},this.getBars())}});e.exports=i},function(e,t,r){"use strict";var s=r(23),o=r(32),i=s.createClass({displayName:"EventCapture",propTypes:{mainChart:s.PropTypes.number.isRequired,mouseMove:s.PropTypes.bool.isRequired,zoom:s.PropTypes.bool.isRequired,zoomMultiplier:s.PropTypes.number.isRequired,pan:s.PropTypes.bool.isRequired,panSpeedMultiplier:s.PropTypes.number.isRequired,defaultFocus:s.PropTypes.bool.isRequired,_chartData:s.PropTypes.object.isRequired,_height:s.PropTypes.number.isRequired,_width:s.PropTypes.number.isRequired,_eventStore:s.PropTypes.object.isRequired,_zoomEventStore:s.PropTypes.object},getInitialState:function(){return{dragOrigin:[0,0],defaultFocus:!1}},componentWillMount:function(){this.setState({className:this.props.className,inFocus:this.props.defaultFocus})},getDefaultProps:function(){return{namespace:"ReStock.EventCapture",mouseMove:!1,zoom:!1,zoomMultiplier:1,pan:!1,panSpeedMultiplier:1,className:"crosshair",defaultFocus:!1}},toggleFocus:function(){this.setFocus(!this.state.defaultFocus)},setFocus:function(e){this.setState({defaultFocus:e})},handleEnter:function(){this.props._eventStore&&this.props._eventStore.get().mouseOver.set({value:!0})},handleLeave:function(){if(this.props._eventStore){{this.props._eventStore.get()}this.props._eventStore.get().mouseOver.set({value:!1}),this.props._eventStore.get().set({pan:!1}),this.setState({dragging:!1,dragOrigin:[0,0],className:this.props.className})}},handleWheel:function(e){if(this.props.zoom&&this.props._eventStore&&this.state.inFocus&&this.props._zoomEventStore){e.stopPropagation(),e.preventDefault();var t=e.deltaY>0?this.props.zoomMultiplier:-this.props.zoomMultiplier;this.props._zoomEventStore.get().set({zoom:t})}},handleMouseMove:function(e){if(this.props._eventStore&&this.props.mouseMove){var t=this.props._eventStore.get(),r=o.mousePosition(e),s=this.state.dragOrigin;(s[0]!==r[0]||s[1]!==r[1])&&(this.state.dragging&&(t=t.set({dx:(r[0]-s[0])*this.props.panSpeedMultiplier,dragOriginDomain:this.state.dragOriginDomain})),t=t.set({mouseXY:r}),t=t.set({pan:this.state.dragging}))}},handleMouseDown:function(e){if(this.props._eventStore){var t=!0;this.setState(this.props.pan&&this.props._zoomEventStore?{dragging:!0,dragOrigin:o.mousePosition(e),dragOriginDomain:this.props._chartData.scales.xScale.domain(),className:"grabbing",inFocus:t}:{inFocus:t})}e.preventDefault()},handleMouseUp:function(e){this.props.pan&&this.props._zoomEventStore&&(this.props._eventStore.get().set({pan:!1}),this.setState({dragging:!1,dragOrigin:[0,0],className:this.props.className})),e.preventDefault()},render:function(){return s.createElement("rect",{className:this.state.className,width:this.props._width,height:this.props._height,style:{opacity:0},onMouseEnter:this.handleEnter,onMouseLeave:this.handleLeave,onMouseMove:this.handleMouseMove,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onWheel:this.handleWheel})}});e.exports=i},function(e,t,r){"use strict";var s=r(23),o=(r(33),r(32)),i=s.createClass({displayName:"MouseCoordinates",propTypes:{_height:s.PropTypes.number.isRequired,_width:s.PropTypes.number.isRequired,_show:s.PropTypes.bool.isRequired,_mouseXY:s.PropTypes.array.isRequired,_chartData:s.PropTypes.object.isRequired,_currentItem:s.PropTypes.object.isRequired,forChart:s.PropTypes.number.isRequired,xDisplayFormat:s.PropTypes.func.isRequired,yDisplayFormat:s.PropTypes.func.isRequired},shouldComponentUpdate:function(e){return e._currentItem!=this.props._currentItem||e._mouseXY!==this.props._mouseXY||e._show!==this.props._show},getDefaultProps:function(){return{namespace:"ReStock.MouseCoordinates",_show:!1,snapX:!0,xDisplayFormat:o.displayDateFormat,yDisplayFormat:o.displayNumberFormat}},renderChildren:function(){var e=this.props._chartData,t=this.props._currentItem.data,r=e.accessors.xAccessor(t),o=void 0===this.props._dateAccessor?r:this.props._dateAccessor(t),i=e.scales.yScale.invert(this.props._mouseXY[1]);if(void 0===r||void 0===i)return null;var n=this.props.snapX?Math.round(e.scales.xScale(r)):this.props._mouseXY[0],a=this.props._mouseXY[1];return s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;var t=e;return s.addons.cloneWithProps(t,{_width:this.props._width,_height:this.props._height,_mouseXY:[n,a],_xDisplayValue:this.props.xDisplayFormat(o),_yDisplayValue:this.props.yDisplayFormat(i)})}.bind(this),this)},render:function(){var e=null;return this.props._show&&(e=this.renderChildren()),s.createElement("g",{className:this.props._show?"show":"hide"},e)}});e.exports=i},function(e,t,r){"use strict";var s=r(23),o=r(33),i=(r(32),s.createClass({displayName:"CrossHair",propTypes:{_height:s.PropTypes.number.isRequired,_width:s.PropTypes.number.isRequired,_mouseXY:s.PropTypes.array.isRequired,_xDisplayValue:s.PropTypes.string.isRequired,_yDisplayValue:s.PropTypes.string.isRequired,yAxisPad:s.PropTypes.number.isRequired},shouldComponentUpdate:function(e){return e._mouseXY!==this.props._mouseXY},getDefaultProps:function(){return{namespace:"ReStock.CrossHair",yAxisPad:5}},render:function(){return s.createElement("g",{className:"crosshair "},s.createElement(o,{type:"horizontal",className:"horizontal",show:!0,x1:0,y1:this.props._mouseXY[1],x2:this.props._width+this.props.yAxisPad,y2:this.props._mouseXY[1],coordinate:this.props._yDisplayValue,edgeAt:this.props._width+this.props.yAxisPad,orient:"right"}),s.createElement(o,{type:"vertical",className:"horizontal",show:!0,x1:this.props._mouseXY[0],y1:0,x2:this.props._mouseXY[0],y2:this.props._height,coordinate:this.props._xDisplayValue,edgeAt:this.props._height,orient:"bottom"}))}}));e.exports=i},function(e,t,r){"use strict";var s=r(23),o=r(33),i=(r(32),s.createClass({displayName:"VerticalMousePointer",propTypes:{_height:s.PropTypes.number.isRequired,_width:s.PropTypes.number.isRequired,_mouseXY:s.PropTypes.array.isRequired,_xDisplayValue:s.PropTypes.string.isRequired,_yDisplayValue:s.PropTypes.string.isRequired,yAxisPad:s.PropTypes.number.isRequired},shouldComponentUpdate:function(e){return e._mouseXY!==this.props._mouseXY},getDefaultProps:function(){return{namespace:"ReStock.VerticalMousePointer",yAxisPad:10}},render:function(){return s.createElement("g",{className:"crosshair "},s.createElement(o,{type:"vertical",className:"horizontal",show:!0,x1:this.props._mouseXY[0],y1:0,x2:this.props._mouseXY[0],y2:this.props._height,coordinate:this.props._xDisplayValue,edgeAt:this.props._height,orient:"bottom"}))}}));e.exports=i},function(e,t,r){"use strict";var s=r(23),o=r(29),i=(r(32),s.createClass({displayName:"CurrentCoordinate",mixins:[o],propTypes:{forChart:s.PropTypes.number.isRequired,forOverlay:s.PropTypes.number,yAccessor:s.PropTypes.func,r:s.PropTypes.number.isRequired,className:s.PropTypes.string,_show:s.PropTypes.bool.isRequired,_chartData:s.PropTypes.object.isRequired,_currentItem:s.PropTypes.object.isRequired},getDefaultProps:function(){return{namespace:"ReStock.CurrentCoordinate",r:3}},render:function(){var e=this.props._chartData,t=this.props._currentItem.data,r="black";if(!this.props._show||void 0===t)return null;var o=this.props.yAccessor||e.accessors.yAccessor;if(void 0!==this.props.forOverlay){var i=e.overlays.filter(function(e){return e.id===this.props.forOverlay}.bind(this));if(1!=i.length)throw console.warn("Unique overlay with id={%s} not found",this.props.forOverlay),new Error("Unique overlay not found");r=i[0].stroke,o=i[0].yAccessor}var n=e.accessors.xAccessor(t),a=o(t);if(void 0===a)return null;var p=Math.round(e.scales.xScale(n))+e.origin[0],c=Math.round(e.scales.yScale(a))+e.origin[1];return s.createElement("circle",{className:this.props.className,cx:p,cy:c,r:this.props.r,fill:r})}}));e.exports=i},function(e,t,r){"use strict";var s=r(23),o=s.createClass({displayName:"TooltipContainer",propTypes:{_currentItems:s.PropTypes.array.isRequired,_charts:s.PropTypes.array.isRequired},shouldComponentUpdate:function(e){return e._charts!==this.props._charts||e._currentItems!==this.props._currentItems},getDefaultProps:function(){return{namespace:"ReStock.TooltipContainer"}},renderChildren:function(){return s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;var t=e,r=this.props._charts.filter(function(e){return e.id===t.props.forChart})[0],o=this.props._currentItems.filter(function(e){return e.id===t.props.forChart})[0];return t=s.addons.cloneWithProps(t,{_currentItem:o.data}),/MovingAverageTooltip$/.test(t.props.namespace)&&(t=s.addons.cloneWithProps(t,{_overlays:r.overlays})),t}.bind(this))},render:function(){return s.createElement("g",{className:"toottip-hover"},this.renderChildren())}});e.exports=o},function(e,t,r){"use strict";var s=r(23),o=r(32),i=1e9,n=1e6,a=1e3,p=s.createClass({displayName:"OHLCTooltip",propTypes:{_currentItem:s.PropTypes.object.isRequired,accessor:s.PropTypes.func.isRequired,xDisplayFormat:s.PropTypes.func.isRequired,origin:s.PropTypes.array.isRequired},shouldComponentUpdate:function(e){return e._currentItem!==this.props._currentItem},getDefaultProps:function(){return{namespace:"ReStock.OHLCTooltip",accessor:function(e){return{date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}},xDisplayFormat:o.displayDateFormat,origin:[0,0]}},render:function(){var e,t,r,p,c,u,h,l;e=t=r=p=c=u=h=l="n/a";var d=this.props.accessor(this.props._currentItem);return void 0!==d&&void 0!==d.close&&(l=d.volume/i>1?(d.volume/i).toFixed(2)+"b":d.volume/n>1?(d.volume/n).toFixed(2)+"m":d.volume/a>1?(d.volume/a).toFixed(2)+"k":d.volume,e=this.props.xDisplayFormat(d.date),p=o.displayNumberFormat(d.open),c=o.displayNumberFormat(d.high),u=o.displayNumberFormat(d.low),h=o.displayNumberFormat(d.close)),s.createElement("g",{transform:"translate("+this.props.origin[0]+", "+this.props.origin[1]+")"},s.createElement("text",{x:0,y:0,className:"legend"},s.createElement("tspan",{key:"label",x:0,dy:"5",className:"tooltip-label"},"Date: "),s.createElement("tspan",{key:"value"},e),s.createElement("tspan",{key:"label_O",className:"tooltip-label"}," O: "),s.createElement("tspan",{key:"value_O"},p),s.createElement("tspan",{key:"label_H",className:"tooltip-label"}," H: "),s.createElement("tspan",{key:"value_H"},c),s.createElement("tspan",{key:"label_L",className:"tooltip-label"}," L: "),s.createElement("tspan",{key:"value_L"},u),s.createElement("tspan",{key:"label_C",className:"tooltip-label"}," C: "),s.createElement("tspan",{key:"value_C"},h),s.createElement("tspan",{key:"label_Vol",className:"tooltip-label"}," Vol: "),s.createElement("tspan",{key:"value_Vol"},l)))}});e.exports=p},function(e,t,r){"use strict";var s=r(23),o=r(32),i=s.createClass({displayName:"SingleMAToolTip",propTypes:{origin:s.PropTypes.array.isRequired,color:s.PropTypes.string.isRequired,displayName:s.PropTypes.string.isRequired,value:s.PropTypes.string.isRequired,onClick:s.PropTypes.func},getDefaultProps:function(){},handleClick:function(e){this.props.onClick&&this.props.onClick(e)},render:function(){var e="translate("+this.props.origin[0]+", "+this.props.origin[1]+")";return s.createElement("g",{transform:e},s.createElement("line",{x1:0,y1:2,x2:0,y2:28,stroke:this.props.color}),s.createElement("text",{x:5,y:11,className:"legend"},s.createElement("tspan",{className:"tooltip-label"},this.props.displayName),s.createElement("tspan",{x:"5",dy:"15"},this.props.value)),s.createElement("rect",{x:0,y:0,width:55,height:30,onClick:this.handleClick.bind(this,this.props.overlay)}))}}),n=s.createClass({displayName:"MovingAverageTooltip",propTypes:{_currentItem:s.PropTypes.object.isRequired,_overlays:s.PropTypes.array.isRequired,displayFormat:s.PropTypes.func.isRequired,origin:s.PropTypes.array.isRequired,onClick:s.PropTypes.func},getDefaultProps:function(){return{namespace:"ReStock.MovingAverageTooltip",displayFormat:o.displayNumberFormat,origin:[0,10],width:65}},render:function(){return s.createElement("g",{transform:"translate("+this.props.origin[0]+", "+this.props.origin[1]+")",className:"ma-container"},this.props._overlays.map(function(e,t){var r=e.yAccessor(this.props._currentItem),o=r?this.props.displayFormat(r):"n/a";return s.createElement(i,{key:t,origin:[this.props.width*t,0],color:e.stroke,displayName:e.tooltipLabel,value:o,overlay:e,onClick:this.props.onClick})}.bind(this)))}});e.exports=n},function(e,t,r){"use strict";var s=r(23),o=s.createClass({displayName:"EdgeContainer",propTypes:{_currentItems:s.PropTypes.array.isRequired,_charts:s.PropTypes.array.isRequired,_height:s.PropTypes.number.isRequired,_width:s.PropTypes.number.isRequired},getDefaultProps:function(){return{namespace:"ReStock.EdgeContainer"}},renderChildren:function(){return s.Children.map(this.props.children,function(e){if("string"==typeof e.type)return e;var t=e;if(/EdgeIndicator$/.test(t.props.namespace)){var r=this.props._charts.filter(function(e){return e.id===t.props.forChart})[0],o=this.props._currentItems.filter(function(e){return e.id===t.props.forChart})[0];t=s.addons.cloneWithProps(t,{_width:this.props._width,_chart:r,_currentItem:o})}return t}.bind(this))},render:function(){return s.createElement("g",null,this.renderChildren())}});e.exports=o},function(e,t,r){"use strict";var s=r(23),o=r(32),i=r(33),n=s.createClass({displayName:"EdgeIndicator",propTypes:{type:s.PropTypes.oneOf(["horizontal"]).isRequired,className:s.PropTypes.string,itemType:s.PropTypes.oneOf(["first","last","current"]).isRequired,orient:s.PropTypes.oneOf(["left","right"]),edgeAt:s.PropTypes.oneOf(["left","right"]),forChart:s.PropTypes.number.isRequired,forOverlay:s.PropTypes.number,displayFormat:s.PropTypes.func.isRequired,_width:s.PropTypes.number,_currentItem:s.PropTypes.object.isRequired,_chart:s.PropTypes.object.isRequired},getDefaultProps:function(){return{type:"horizontal",orient:"left",edgeAt:"left",displayFormat:o.displayNumberFormat,yAxisPad:5,namespace:"ReStock.EdgeIndicator"}},renderEdge:function(){var e,t,r=null;if(void 0!==this.props.forOverlay&&this.props._chart.overlays.length>0&&this.props._chart.overlayValues.length>0){var o=this.props._chart.overlays.filter(function(e){return e.id===this.props.forOverlay}.bind(this)),n=this.props._chart.overlayValues.filter(function(e){return e.id===this.props.forOverlay}.bind(this));if(1!==o.length)throw console.warn("%s overlays found with id %s, correct the OverlaySeries so there is exactly one for each id",o.length,newChild.props.forOverlay),new Error("Unable to identify unique Overlay for the id");
if(1!==n.length&&1===o.length&&console.warn("Something is wrong!!!, There should be 1 overlayValue, report the issue on github"),e="first"===this.props.itemType?n[0].first:"last"===this.props.itemType?n[0].last:this.props._currentItem,t=o[0].yAccessor,void 0!==e){var a=t(e),p=this.props._chart.accessors.xAccessor(e),c=Math.round(this.props._chart.scales.xScale(p)),u=Math.round(this.props._chart.scales.yScale(a)),h="left"===this.props.edgeAt?0-this.props.yAxisPad:this.props._width+this.props.yAxisPad;r=s.createElement(i,{type:this.props.type,className:"edge-coordinate",fill:o[0].stroke,show:!0,x1:c+this.props._chart.origin[0],y1:u+this.props._chart.origin[1],x2:h+this.props._chart.origin[0],y2:u+this.props._chart.origin[1],coordinate:this.props.displayFormat(a),edgeAt:h,orient:this.props.orient})}}else if(void 0===this.props.forOverlay&&(e="first"===this.props.itemType?this.props._chart.firstItem:"last"===this.props.itemType?this.props._chart.lastItem:this.props._currentItem,t=this.props._chart.accessors.yAccessor,void 0!==e&&null!==t)){var a=t(e),p=this.props._chart.accessors.xAccessor(e),c=Math.round(this.props._chart.scales.xScale(p)),u=Math.round(this.props._chart.scales.yScale(a)),h="left"===this.props.edgeAt?0-this.props.yAxisPad:this.props._width+this.props.yAxisPad;r=s.createElement(i,{type:this.props.type,className:"edge-coordinate",show:!0,x1:c+this.props._chart.origin[0],y1:u+this.props._chart.origin[1],x2:h+this.props._chart.origin[0],y2:u+this.props._chart.origin[1],coordinate:this.props.displayFormat(a),edgeAt:h,orient:this.props.orient})}return r},render:function(){return this.renderEdge()}});e.exports=n},function(t){t.exports=e},function(e){e.exports=t},function(e,t,r){"use strict";function s(e){return e instanceof Date?e.getTime():e}var o=r(23),i=(r(13),r(14),r(32)),n=r(36),a={doesContainChart:function(){var e=Array.isArray(this.props.children)?this.props.children:[this.props.children];return e.filter(function(e){return/Chart$/.test(e.props.namespace)}).length>0},componentWillMount:function(){if(this.doesContainChart()){var e=new n({mouseXY:[0,0],mouseOver:{value:!1},inFocus:{value:!0}}),t=new n({zoom:0}),r=new n({charts:[],updateMode:{immediate:!0}}),s={};this.isDataDransform&&this.isDataDransform()&&(s=this.transformData(this.props));var i,a,p=new n({currentItems:[],viewPortXRange:[],viewPortXDelta:30});s&&s._stockScale?(p.get().set({interval:"D"}),i=s.data,a=i[p.get().interval]):(i=this.props.data,a=i),o.Children.forEach(this.props.children,function(e){if("ReStock.Chart"===e.props.namespace){var t=e.props,o=this.getDimensions(this.props,t),n=o.width/4;a.length>n&&(a=a.slice(a.length-n));var p=this.getChartDataFor(this.props,t,a,i,s);p.id=e.props.id,r.get().charts.push(p)}}.bind(this));var c={eventStore:e,chartStore:r,currentItemStore:p,zoomEventStore:t,fullData:i,data:a,passThroughProps:s};this.setState(c)}},getEventStore:function(){return this.state.eventStore},updateEventStore:function(e,t){this.unListen();var r={eventStore:e,chartStore:this.state.chartStore,currentItemStore:this.state.currentItemStore,zoomEventStore:t||this.state.zoomEventStore};this.setState(r,function(){this.listen(r)}.bind(this))},componentWillUnmount:function(){this.doesContainChart()&&this.unListen()},unListen:function(){void 0!==this.state.eventStore&&this.state.eventStore.off("update",this.eventListener),void 0!==this.state.chartStore&&this.state.chartStore.off("update",this.dataListener),void 0!==this.state.zoomEventStore&&this.state.zoomEventStore.off("update",this.zoomEventListener)},eventListener:function(){this.state.chartStore.get().updateMode.immediate&&(this.state.chartStore.get().charts.forEach(function(e){this.updateCurrentItemForChart(e)}.bind(this)),this.state.eventStore.get().pan?requestAnimationFrame(function(){var e=this.state.currentItemStore.get().mainChart,t=this.getChartForId(e),r=this.state.eventStore.get().dragOriginDomain,i=r[1]-r[0],n=this.state.fullData[this.state.currentItemStore.get().interval],a=n[n.length-1],p=n[0],c=Math.round(s(r[0])-this.state.eventStore.get().dx/t.width*i);c=c<s(t.accessors.xAccessor(p))-Math.floor(i/3)?s(t.accessors.xAccessor(p))-Math.floor(i/3):Math.min(s(t.accessors.xAccessor(a))+Math.ceil(i/3),c+i)-i;var u=c,h=c+i;r[0]instanceof Date&&(u=new Date(u),h=new Date(h)),this.state.currentItemStore.get().viewPortXRange.set([u,h]);var l=this.calculateViewableData();o.Children.forEach(this.props.children,function(e){if("ReStock.Chart"===e.props.namespace){var t=this.getChartForId(e.props.id);t=this.updateChartDataFor(t,l.data),t.scales.xScale.domain([u,h])}}.bind(this)),this.setState({data:l.data})}.bind(this)):this.forceUpdate())},componentWillReceiveProps:function(e){if(this.doesContainChart()){var t;this.isDataDransform&&this.isDataDransform()&&(t=this.transformData(this.props)),o.Children.forEach(e.children,function(r){if("ReStock.Chart"===r.props.namespace){var s=r.props,o=this.getChartDataFor(e,s,e.data,e.data,t);o.id=r.props.id;var i=this.getChartForId(r.props.id);i.reset(o)}}.bind(this))}},calculateViewableData:function(){var e=this.state.currentItemStore.get().viewPortXRange,t=this.getFullData()[this.state.currentItemStore.get().interval],r=this.state.data;if(e.length>0){var o=this.state.currentItemStore.get().mainChart,n=this.getChartForId(o),a=i.getClosestItemIndexes(t,e[0],n.accessors.xAccessor),p=i.getClosestItemIndexes(t,e[1],n.accessors.xAccessor);console.log("whoa whoa whoa");var c=this.state.currentItemStore.get().interval,u=t.slice(a.left,p.right);if(this.state.passThroughProps&&this.state.passThroughProps._stockScale&&u.length>n.width/3)if(this.state.passThroughProps._multiInterval&&"D"===c){var h="W";this.state.currentItemStore.get().set({interval:h}),t=this.state.fullData[h],a=i.getClosestItemIndexes(t,e[0],n.accessors.xAccessor),p=i.getClosestItemIndexes(t,e[1],n.accessors.xAccessor),u=t.slice(a.left,p.right)}else{if(!this.state.passThroughProps._multiInterval||"W"!==c){var l=s(n.accessors.xAccessor(this.state.data[0])),d=s(n.accessors.xAccessor(this.state.data[this.state.data.length-1]));return this.state.currentItemStore.get().set({viewPortXRange:[l,d]}),{data:this.state.data}}var h="M";this.state.currentItemStore.get().set({interval:h}),t=this.state.fullData[h],a=i.getClosestItemIndexes(t,e[0],n.accessors.xAccessor),p=i.getClosestItemIndexes(t,e[1],n.accessors.xAccessor),u=t.slice(a.left,p.right)}else if(this.state.passThroughProps&&this.state.passThroughProps._stockScale&&("W"===c||"M"===c));else if(u.length/n.width<.03){var l=s(n.accessors.xAccessor(this.state.data[0])),d=s(n.accessors.xAccessor(this.state.data[this.state.data.length-1]));return this.state.currentItemStore.get().set({viewPortXRange:[l,d]}),{data:this.state.data}}return{data:u}}return{data:r}},zoomEventListener:function(){if(this.state.chartStore.get().updateMode.immediate){var e=this.state.zoomEventStore.get(),t=e.zoom,r=this.state.currentItemStore.get().mainChart,i=this.getChartForId(r);this.updateCurrentItemForChart(i);var n=this.getCurrentItemForChart(r).data,a=i.scales.xScale.domain(),p=i.accessors.xAccessor(n),c=p-a[0],u=a[1]-p,h=Math.pow(1+Math.abs(t)/2,t),l=s(p)-c*h,d=s(p)+u*h,f=Math.abs(a[1]-a[0]),m=this.state.fullData[this.state.currentItemStore.get().interval],y=m[m.length-1],g=m[0];l=Math.max(s(i.accessors.xAccessor(g))-Math.floor(f/3),l),d=Math.min(s(i.accessors.xAccessor(y))+Math.floor(f/3),d),p instanceof Date&&(l=new Date(l),d=new Date(d)),this.state.currentItemStore.get().viewPortXRange.set([l,d]),requestAnimationFrame(function(){var e=this.calculateViewableData();console.log(l,d);this.state.passThroughProps;o.Children.forEach(this.props.children,function(t){if("ReStock.Chart"===t.props.namespace){var r=this.getChartForId(t.props.id);r=this.updateChartDataFor(r,e.data),r.scales.xScale.domain(this.state.currentItemStore.get().viewPortXRange)}}.bind(this)),this.setState({data:e.data})}.bind(this))}},dataListener:function(){this.state.chartStore.get().updateMode.immediate&&requestAnimationFrame(function(){this.forceUpdate()}.bind(this))},componentDidMount:function(){this.doesContainChart()&&this.listen(this.state)},componentDidUpdate:function(){this.doesContainChart()&&(this.state.chartStore.get().updateMode.immediate||this.state.chartStore.get().updateMode.set({immediate:!0}))},listen:function(e){e.eventStore.on("update",this.eventListener),e.zoomEventStore.on("update",this.zoomEventListener)},updatePropsForEventCapture:function(e){return"ReStock.EventCapture"===e.props.namespace?((void 0===this.state.currentItemStore.get().mainChart||this.state.currentItemStore.get().mainChart!==e.props.mainChart)&&this.state.currentItemStore.get().set({mainChart:e.props.mainChart}),o.addons.cloneWithProps(e,{_eventStore:this.state.eventStore,_zoomEventStore:this.state.zoomEventStore,_chartData:this.getChartForId(e.props.mainChart)})):e},updatePropsForCurrentCoordinate:function(e){if("ReStock.CurrentCoordinate"===e.props.namespace){var t=this.getChartForId(e.props.forChart),r=this.getCurrentItemForChart(e.props.forChart);return o.addons.cloneWithProps(e,{_show:this.state.eventStore.get().mouseOver.value,_chartData:t,_currentItem:r})}return e},updatePropsForMouseCoordinates:function(e){if("ReStock.MouseCoordinates"===e.props.namespace){var t=this.getChartForId(e.props.forChart),r=this.getCurrentItemForChart(e.props.forChart);return o.addons.cloneWithProps(e,{_show:this.state.eventStore.get().mouseOver.value,_mouseXY:this.state.eventStore.get().mouseXY,_chartData:t,_currentItem:r})}return e},updatePropsForTooltipContainer:function(e){return"ReStock.TooltipContainer"===e.props.namespace?o.addons.cloneWithProps(e,{_currentItems:this.state.currentItemStore.get().currentItems,_charts:this.state.chartStore.get().charts}):e},updatePropsForEdgeContainer:function(e){return"ReStock.EdgeContainer"===e.props.namespace?o.addons.cloneWithProps(e,{_currentItems:this.state.currentItemStore.get().currentItems,_charts:this.state.chartStore.get().charts}):e},updatePropsForChart:function(e){var t=e;if("ReStock.Chart"===e.props.namespace&&this.state.eventStore&&this.state.chartStore){var r=this.getChartForId(t.props.id);t=o.addons.cloneWithProps(t,{_updateMode:this.state.chartStore.get().updateMode,_chartData:r,data:this.getData()})}return t},getData:function(){return this.state.data},getFullData:function(){return this.state.fullData},getChartForId:function(e){var t=this.state.chartStore.get().charts,r=t.filter(function(t){return t.id===e});if(r.length>1){var s="multiple charts with the same id "+e+" found";throw console.warn(s),new Error(s)}return 0===r.length?(t=t.push(createChartData(e)),this.getChartForId(e)):r[0]},createChartData:function(e){var t={id:e,scales:{xScale:null,yScale:null},accessors:{xAccessor:null,yAccessor:null},lastItem:{},firstItem:{},overlays:[],overlayValues:[]};return t},getCurrentItemForChart:function(e){var t=this.state.currentItemStore.get().currentItems,r=t.filter(function(t){return t.id===e});if(r.length>1){var s="multiple filteredCurrentItems with the same id "+e+" found";throw console.warn(s),new Error(s)}if(0===r.length){var o={id:e,data:{}};return t=t.push(o),this.getCurrentItemForChart(e)}return r[0]},updateCurrentItemForChart:function(e){var t=this.getCurrentItemForChart(e.id),r=this.state.eventStore.get().mouseXY;null===e.scales.xScale&&console.warn("Verify if the the <Chart id=... > matches with the forChart=... This error likely because a Chart defined with id={%s} is not found",e.id);var s=e.scales.xScale.invert(r[0]),o=i.getClosestItem(this.getData(),s,e.accessors.xAccessor);t=t.data.reset(o)},_renderChildren:function(e){return this.doesContainChart()?o.Children.map(e,function(e){if("string"==typeof e.type)return e;var t=e;return t=this.updatePropsForEventCapture(e),t=this.updatePropsForMouseCoordinates(t),t=this.updatePropsForTooltipContainer(t),t=this.updatePropsForEdgeContainer(t),t=this.updatePropsForChart(t),t=this.updatePropsForCurrentCoordinate(t)}.bind(this)):e}};e.exports=a},function(e,t,r){"use strict";var s=r(23),o=r(24),i=r(30),n=r(31),a=r(32),p=(r(6),a.overlayColors),c=a.pluck,u=a.keysAsArray,h={getDimensions:function(e,t){var r=e._width||this.getAvailableWidth(e),s=e._height||this.getAvailableHeight(e),o=t.width||r,i=t.height||s;return{availableWidth:r,availableHeight:s,width:o,height:i}},getChartDataFor:function(e,t,r,s,o){var n=this.getDimensions(e,t),p=this.defineScales(t,r,o),h=this.getXYAccessors(t,o),l=this.identifyOverlaysToAdd(t);this.calculateOverlays(s,l);var d=c(u(l),"yAccessor"),f=i.flattenData(r,[h.xAccessor],[h.yAccessor].concat(d)),m=this.updateOverlayFirstLast(r,l);p=this.updateScales(f,p,r,n.width,n.height);var y=a.cloneMe(r[r.length-1]),g=a.cloneMe(r[0]),v="function"==typeof t.origin?t.origin(n.availableWidth,n.availableHeight):t.origin,_=p.xScale(h.xAccessor(r[r.length-1]))-p.xScale(h.xAccessor(r[0])),x={width:n.width,height:n.height,drawableWidth:_,origin:v,overlayValues:m,overlays:l,accessors:h,scales:p,lastItem:y,firstItem:g};return x},defineScales:function(e,t,r){var s=e.xScale||e._xScale,i=e.yScale;if(void 0===s&&r&&(s=r._xScale),void 0===s){var n=t[0];"object"==typeof n&&Object.keys(n).forEach(function(e){"[object Date]"===Object.prototype.toString.call(n[e])&&(s=o.time.scale())}),void 0===s&&(s=o.scale.linear())}return void 0===i&&(i=o.scale.linear()),{xScale:s,yScale:i}},getXYAccessors:function(e,t){var r={xAccessor:null,yAccessor:null};return s.Children.forEach(e.children,function(e){if(["ReStock.DataSeries"].indexOf(e.props.namespace)>-1&&e.props){var s=void 0!==t&&t._stockScale?t._indexAccessor:e.props.xAccessor;r.xAccessor=s,r.yAccessor=e.props.yAccessor}}),r},identifyOverlaysToAdd:function(e){var t=[];return s.Children.forEach(e.children,function(r){/DataSeries$/.test(r.props.namespace)&&s.Children.forEach(r.props.children,function(r){if(/OverlaySeries$/.test(r.props.namespace)){var s=n.getYAccessorKey(e.id,r.props),o={id:r.props.id,chartId:e.id,key:s,yAccessor:function(e){return e[s]},options:r.props.options,type:r.props.type,tooltipLabel:n.getToolTipLabel(r.props),stroke:r.stroke||p(r.props.id)};t.push(o)}})}),t},calculateOverlays:function(e,t){Array.isArray(e)?t.filter(function(e){return void 0!==e.id}).forEach(function(t){n.calculateOverlay(e,t)}):Object.keys(e).filter(function(e){return["D","W","M"].indexOf(e)>-1}).forEach(function(r){t.filter(function(e){return void 0!==e.id}).forEach(function(t){n.calculateOverlay(e[r],t)})})},updateOverlayFirstLast:function(e,t){var r=[];return t.forEach(function(t){r.push({id:t.id,first:n.firstDefined(e,t.yAccessor),last:n.lastDefined(e,t.yAccessor)})}),r},updateScales:function(e,t,r,s,i){console.log("updateScales"),t.xScale.range([0,s]),t.xScale.isPolyLinear&&t.xScale.isPolyLinear()?t.xScale.data(r):t.xScale.domain(o.extent(e.xValues)),t.yScale.range([i,0]);var n=o.extent(e.yValues);return t.yScale.domain(n),{xScale:t.xScale.copy(),yScale:t.yScale.copy()}},updateChartDataFor:function(e,t){console.log("updateChartDataFor");var r=e.scales,s=e.accessors,o=this.updateOverlayFirstLast(t,e.overlays);e=e.set({overlayValues:o});var n=c(u(e.overlays),"yAccessor"),p=i.flattenData(t,[s.xAccessor],[s.yAccessor].concat(n));r=this.updateScales(p,r,t,e.width,e.height),e=e.set({scales:r});var h=a.cloneMe(t[t.length-1]);e=e.set({lastItem:h});var l=a.cloneMe(t[0]);return e=e.set({firstItem:l})}};e.exports=h},function(e,t,r){"use strict";var s=r(34),o={isDataDransform:function(){return!0},transformData:function(e){var t=s.getTransformerFor(e.transformType),r=t(e.data,e.options);return r}};e.exports=o},function(e,t,r){"use strict";function s(e,t,r){function i(e){for(var t=0,r=u[t];!r[1](e);)r=u[++t];var s=r[0](e.date);return s}function n(e){return r(e)}var a=[{step:864e5,f:function(e){return void 0!==e.date&&!0}},{step:1728e5,f:function(e,t){return void 0!==e.date&&t%2==0}},{step:838e6,f:function(e,t,r){if(e.startOfMonth)return!0;var s=[];t-2>=0&&s.push(r[t-2]),t-1>=0&&s.push(r[t-1]),s.push(r[t]),t+1<=r.length-1&&s.push(r[t+1]),t+2<=r.length-1&&s.push(r[t+2]);var o=s.map(function(e){return e.startOfMonth}).reduce(function(e,t){return e||t});return o?!1:e.startOfWeek}},{step:3525e6,f:function(e){return e.startOfMonth}},{step:7776e6,f:function(e){return e.startOfQuarter}},{step:31536e6,f:function(e){return e.startOfYear}},{step:91536e15,f:function(e){return void 0!==e.date&&e.startOfYear&&e.date.getFullYear()%2==0}}],p=o.bisector(function(e){return e.step}).left,c=o.bisector(function(e){return t(e)}).left,u=[[o.time.format("%Y"),function(e){return e.startOfYear}],[o.time.format("%b %Y"),function(e){return e.startOfQuarter}],[o.time.format("%b"),function(e){return e.startOfMonth}],[o.time.format("%d %b"),function(e){return e.startOfWeek}],[o.time.format("%a %d "),function(){return!0}]];return n.isPolyLinear=function(){return!0},n.invert=function(e){return r.invert(e)},n.data=function(r){return arguments.length?(e=r,this.domain([t(e[0]),t(e[e.length-1])]),n):e},n.domain=function(e){if(!arguments.length)return r.domain();var t=[Math.floor(e[0]),Math.ceil(e[1])];return r.domain(t),n},n.range=function(e){return arguments.length?(r.range(e),n):r.range()},n.rangeRound=function(e){return r.range(e)},n.clamp=function(e){return arguments.length?(r.clamp(e),n):r.clamp()},n.interpolate=function(e){return arguments.length?(r.interpolate(e),n):r.interpolate()},n.ticks=function(r){var s,o,i=0;e.forEach(function(e){void 0!==e.date&&(void 0===s&&(s=e),o=e,i++)}),r=i/e.length*r;var n=o.date.getTime()-s.date.getTime(),c=n/r,u=e.filter(a[p(a,c)].f).map(function(e){return t(e)});return u},n.tickFormat=function(){return function(t){var r=c(e,t);return i(e[r])}},n.nice=function(e){return r.nice(e),n},n.copy=function(){return s(e,t,r.copy())},n}var o=r(24),i=function(e){return s([0,1],e,o.scale.linear())};e.exports=i},function(e,t,r){"use strict";var s=r(37),o={shouldComponentUpdate:function(e,t){var r="function"==typeof this.extraShouldComponentUpdate?this.extraShouldComponentUpdate:function(e,t,r){return r},o=!s(this.props,e)||!s(this.state,t);return r(e,t,o)}};e.exports=o},function(e){"use strict";function t(e,t){"object"==typeof t&&Object.keys(t).length>0?Object.keys(t).forEach(function(r){isNaN(t[r])||e.push(t[r])}):isNaN(t)||e.push(t)}var r={flattenData:function(e,r,s){var o=[],i=[];return e.forEach(function(e){r.forEach(function(r){var s=r(e);void 0!==s&&t(o,s)}),s.forEach(function(r){var s=r(e);void 0!==s&&t(i,s)})}),{xValues:o,yValues:i}}};e.exports=r},function(e,t,r){"use strict";var s=r(32),o=r(35),i={getToolTipLabel:function(e){if("sma"===e.type||"ema"===e.type){var t=e.type.toUpperCase()+"("+e.options.period+")";return t}return"N/A"},getYAccessorKey:function(e,t){if("sma"===t.type||"ema"===t.type){var r=t.type+t.options.period+"_chart_"+e;return r}return!1},calculateOverlay:function(e,t){return console.log(t),"sma"===t.type?e=o.calculateSMA(e,t.options.period,t.key,t.options.pluck):"ema"===t.type&&(e=o.calculateEMA(e,t.options.period,t.key,t.options.pluck)),e},firstDefined:function(e,t){for(var r,o=0;o<e.length;o++)if(void 0!==t(e[o])){r=e[o];break}return s.cloneMe(r)},lastDefined:function(e,t){for(var r,o=e.length-1;o>=0;o--)if(void 0!==t(e[o])){r=e[o];break}return s.cloneMe(r)}};e.exports=i},function(e,t,r){"use strict";function s(){}var o=r(24),i=o.scale.category10();s.overlayColors=i,s.cloneMe=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=s.cloneMe(e[r]));return t},s.displayDateFormat=o.time.format("%Y-%m-%d"),s.displayNumberFormat=function(e){return s.numberWithCommas(e.toFixed(2))},s.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},s.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},s.mousePosition=function(e){var t=e.currentTarget,r=t.getBoundingClientRect(),s=e.clientX-r.left-t.clientLeft,o=e.clientY-r.top-t.clientTop,i=[Math.round(s),Math.round(o)];return i},s.getValue=function(e){return e instanceof Date?e.getTime():e},s.getClosestItem=function(e,t,r){for(var o=0,i=e.length-1;i-o>1;){var n=Math.round((o+i)/2);r(e[n])<=t?o=n:i=n}r(e[o])===t&&(i=o);var a=Math.abs(r(e[o])-t)<Math.abs(r(e[i])-t)?e[o]:e[i];return s.cloneMe(a)},s.getClosestItemIndexes=function(e,t,r){for(var s=0,o=e.length-1;o-s>1;){var i=Math.round((s+o)/2);r(e[i])<=t?s=i:o=i}return r(e[s])===t&&(o=s),{left:s,right:o}},s.pluck=function(e,t){return e.map(function(e){return e[t]})},s.keysAsArray=function(e){return Object.keys(e).filter(function(t){return null!==e[t]}).map(function(t){return e[t]})},s.sum=function(e){return e.reduce(function(e,t){return e+t})},e.exports=s},function(e,t,r){"use strict";var s=r(23),o=s.createClass({displayName:"EdgeCoordinate",propTypes:{type:s.PropTypes.oneOf(["vertical","horizontal"]).isRequired,coordinate:s.PropTypes.any.isRequired,x1:s.PropTypes.number.isRequired,y1:s.PropTypes.number.isRequired,x2:s.PropTypes.number.isRequired,y2:s.PropTypes.number.isRequired,orient:s.PropTypes.oneOf(["bottom","top","left","right"]),rectWidth:s.PropTypes.number},getDefaultProps:function(){return{orient:"left"}},render:function(){if(!this.props.show)return null;var e,t,r,o,i=this.props.coordinate,n=this.props.rectWidth?this.props.rectWidth:"horizontal"===this.props.type?60:100,a=20;"horizontal"===this.props.type?(e="right"===this.props.orient?this.props.edgeAt+1:this.props.edgeAt-n-1,t=this.props.y1-a/2,r="right"===this.props.orient?this.props.edgeAt+n/2:this.props.edgeAt-n/2,o=this.props.y1):(e=this.props.x1-n/2,t="bottom"===this.props.orient?this.props.edgeAt:this.props.edgeAt-a,r=this.props.x1,o="bottom"===this.props.orient?this.props.edgeAt+a/2:this.props.edgeAt-a/2);var p=null,c=null;return void 0!==i&&(p=s.createElement("rect",{key:1,className:"textbg",x:e,y:t,height:a,width:n,fill:this.props.fill}),c=s.createElement("text",{key:2,x:r,y:o,style:{textAnchor:"middle"},dy:".32em"},i)),s.createElement("g",{className:(this.props.show?"show ":"hide ")+this.props.className},s.createElement("line",{className:"cross-hair",x1:this.props.x1,y1:this.props.y1,x2:this.props.x2,y2:this.props.y2}),p,c)}});e.exports=o},function(e,t,r){"use strict";var s=r(38),o={getTransformerFor:function(e){return"none"===e?function(e){return e}:"stockscale"===e?s:!1},filter:function(e,t,r,s){var o=e.filter(function(e){var o=t(e).getTime()>r.getTime()&&t(e).getTime()<s.getTime();return o});return o}};e.exports=o},function(e,t,r){"use strict";function s(){}var o=r(32),i=o.pluck,n=o.sum;s.calculateSMA=function(e,t,r,s){console.log("calculateSMA");var o=e.length-1,a=s||"close";return e.map(function(r,s){return e.slice(s-t,s)}).filter(function(e){return e.length===t&&e.length>0}).map(function(e){return i(e,a)}).map(function(e){return n(e)}).map(function(e){return e/t}).reverse().forEach(function(t,s){e[o-s][r]=t}),"sma53_chart_2"===r&&console.table(e),e},s.calculateEMA=function(){return console.log("calculating EMA"),!1},e.exports=s},function(e,t,r){var s=r(39);e.exports=s},function(e){"use strict";function t(e,t){if(e===t)return!0;var r;for(r in e)if(e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||e[r]!==t[r]))return!1;for(r in t)if(t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!0}e.exports=t},function(e,t,r){"use strict";function s(e,t){void 0===t&&(t=p);var r,s=t.dateAccesor,n=t.dateMutator||function(e,t){e.date=t},c=t.indexMutator,u={};return u.D=e.map(function(e,t){var o=e;c(o,t),o.startOfWeek=!1,o.startOfMonth=!1,o.startOfQuarter=!1,o.startOfYear=!1;var i=s(o);return void 0!==r&&(o.startOfWeek=i.getDay()<r.getDay(),o.startOfMonth=i.getMonth()!=r.getMonth(),o.startOfQuarter=o.startOfMonth&&i.getMonth()%3===0,o.startOfYear=i.getYear()!=r.getYear()),r=i,o}),u.W=o(u.D,c,s,n),u.M=i(u.D,c,s,n),{data:u,_dateAccessor:s,_indexAccessor:t.indexAccessor,_stockScale:!0,_xScale:a(t.indexAccessor),_multiInterval:!0}}function o(e,t,r,s){for(var o,i=[],n={},a=0;a<e.length;a++){var p=e[a];r(n)&&t(n,a),s(n,r(p)),n.startOfWeek=n.startOfWeek||p.startOfWeek,n.startOfMonth=n.startOfMonth||p.startOfMonth,n.startOfQuarter=n.startOfQuarter||p.startOfQuarter,n.startOfYear=n.startOfYear||p.startOfYear,n.open||(n.open=p.open),n.high||(n.high=p.high),n.low||(n.low=p.low),n.close=p.close,n.high=Math.max(n.high,p.high),n.low=Math.min(n.low,p.low),n.volume||(n.volume=0),n.volume+=p.volume,p.startOfWeek&&(o&&(n.trueRange=Math.max(n.high-n.low,n.high-o.close,n.low-o.close)),o=n,i.push(n),n={})}return i}function i(e,t,r){for(var s,o=[],i={},n=0;n<e.length;n++){var a=e[n];i.date||t(i,n),i.date=r(a),i.startOfMonth=i.startOfMonth||a.startOfMonth,i.startOfQuarter=i.startOfQuarter||a.startOfQuarter,i.startOfYear=i.startOfYear||a.startOfYear,i.open||(i.open=a.open),i.high||(i.high=a.high),i.low||(i.low=a.low),i.close=a.close,i.high=Math.max(i.high,a.high),i.low=Math.min(i.low,a.low),i.volume||(i.volume=0),i.volume+=a.volume,a.startOfMonth&&(i.startOfWeek=a.startOfWeek,s&&(i.trueRange=Math.max(i.high-i.low,i.high-s.close,i.low-s.close)),s=i,o.push(i),i={})}return o}var n=r(24),a=(n.time.format("%Y-%m-%d"),r(32),r(28)),p={dateAccesor:function(e){return e.date},indexAccessor:function(e){return e._idx},indexMutator:function(e,t){e._idx=t}};e.exports=s},function(e,t,r){"use strict";var s=r(40),o=r(41),i=(r(42),r(43)),n=function(e){var t,r=this,o=function(e,t,r){if("listener"==e)return i.createListener(t);var o=i.update(e,t,r);return o?o:s.error("Can't udpate. The node is not in the freezer.")};t=i.freeze(e,o);var n=t.getListener(),a=!1;n.on("immediate",function(e,o){e==t&&(t=o,a||(a=!0,s.nextTick(function(){a=!1,r.trigger("update",t)})))}),s.addNE(this,{get:function(){return t},set:function(e){var r=o("reset",t,e);r.__.listener.trigger("immediate",t,r)}}),s.addNE(this,{getData:this.get,setData:this.set}),this._events=[]};n.prototype=s.createNonEnumerable({},o),e.exports=n},function(e){"use strict";var t=new Function("return this")(),r={extend:function(e,t){for(var r in t)e[r]=t[r];return e},createNonEnumerable:function(e,t){var r={};for(var s in e)r[s]={value:e[s]};return Object.create(t||{},r)},error:function(e){var t=new Error(e);if(console)return console.error(t);throw t},each:function(e,t){var r,s,o;if(e&&e.constructor==Array)for(r=0,s=e.length;s>r;r++)t(e[r],r);else for(o=Object.keys(e),r=0,s=o.length;s>r;r++)t(e[o[r]],o[r])},addNE:function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t[r]})},nextTick:function(){function e(){for(;s=o.shift();)s();i=!1}function r(e){o.push(e),i||(i=!0,p())}var s,o=[],i=!1,n=!!t.postMessage,a="nexttick",p=function(){return n?function(){t.postMessage(a,"*")}:function(){setTimeout(function(){c()},0)}}(),c=function(){return n?function(r){r.source===t&&r.data===a&&(r.stopPropagation(),e())}:e}();return n&&t.addEventListener("message",c,!0),r.removeListener=function(){t.removeEventListener("message",c,!0)},r}()};e.exports=r},function(e,t,r){"use strict";var s=r(40),o={on:function(e,t,r){var s=this._events[e]||[];return s.push({callback:t,once:r}),this._events[e]=s,this},once:function(e,t){this.on(e,t,!0)},off:function(e,t){if("undefined"==typeof e)this._events={};else if("undefined"==typeof t)this._events[e]=[];else{var r,s=this._events[e]||[];for(r=s.length-1;r>=0;r--)s[r]===t&&s.splice(r,1)}return this},trigger:function(e){var t,r,s=[].slice.call(arguments,1),o=this._events[e]||[],i=[];for(t=0;t<o.length;t++)r=o[t],r.callback?r.callback.apply(null,s):r.once=!0,r.once&&i.push(t);for(t=i.length-1;t>=0;t--)o.splice(i[t],1);return this}},i=s.createNonEnumerable(o);e.exports=i},function(e,t,r){"use strict";var s=r(40),o=function(e){var t={};for(var r in e)t[r]={writable:!0,configurable:!0,enumerable:!1,value:e[r]};return t},i={set:function(e,t){var r=e;return"undefined"!=typeof t&&(r={},r[e]=t),this.__.notify("merge",this,r)},getListener:function(){return this.__.notify("listener",this)},toJS:function(){var e;return e=this.constructor==Array?new Array(this.length):{},s.each(this,function(t,r){e[r]=t&&t.__?t.toJS():t}),e}},n=s.extend({push:function(e){return this.append([e])},append:function(e){return e&&e.length?this.__.notify("splice",this,[this.length,0].concat(e)):this},pop:function(){return this.length?this.__.notify("splice",this,[this.length-1,1]):this},unshift:function(e){return this.prepend([e])},prepend:function(e){return e&&e.length?this.__.notify("splice",this,[0,0].concat(e)):this},shift:function(){return this.length?this.__.notify("splice",this,[0,1]):this},splice:function(){return this.__.notify("splice",this,arguments)}},i),a=Object.create(Array.prototype,o(n)),p={Hash:Object.create(Object.prototype,o(s.extend({remove:function(e){var t=[],r=e;e.constructor!=Array&&(r=[e]);for(var s=0,o=r.length;o>s;s++)this.hasOwnProperty(r[s])&&t.push(r[s]);return t.length?this.__.notify("remove",this,t):this},reset:function(e){return this.__.notify("replaceself",this,e)}},i))),List:a,arrayMethods:n};e.exports=p},function(e,t,r){"use strict";var s=r(40),o=r(42),i=r(41),n={freeze:function(e,t){if(e&&e.__)return e;var r,i,n=this;return r=e.constructor==Array?this.createArray(e.length):Object.create(o.Hash),s.addNE(r,{__:{listener:!1,parents:[],notify:t,dirty:!1}}),s.each(e,function(e,s){i=e&&e.constructor,(i==Array||i==Object)&&(e=n.freeze(e,t)),e&&e.__&&n.addParent(e,r),r[s]=e}),Object.freeze(r),r},update:function(e,t,r){return this[e]?this[e](t,r):s.error("Unknown update type: "+e)},reset:function(e,t){var r,o=this;return t&&t.__?(r=t,r.__.listener=t.__.listener,r.__.parents=[],this.fixChildren(r,e),s.each(r,function(t){t&&t.__&&(o.removeParent(e),o.addParent(t,r))})):r=this.freeze(e,e.__.notify),r},merge:function(e,t){var r,o,i,n,a=this,p=this.copyMeta(e),c=e.__.notify;s.each(e,function(s,i){return n=s&&s.__,n&&a.removeParent(s,e),(r=t[i])?(o=r&&r.constructor,(o==Array||o==Object)&&(r=a.freeze(r,c)),r&&r.__&&a.addParent(r,p),delete t[i],void(p[i]=r)):(n&&a.addParent(s,p),p[i]=s)});for(i in t)r=t[i],o=r&&r.constructor,(o==Array||o==Object)&&(r=a.freeze(r,c)),r&&r.__&&a.addParent(r,p),p[i]=r;return Object.freeze(p),this.refreshParents(e,p),p},replaceself:function(e,t){var r,s,o,i=this,n=this.copyMeta(e),a=e.__.notify;for(o in t)r=t[o],s=r&&r.constructor,(s==Array||s==Object)&&(r=i.freeze(r,a)),r&&r.__&&i.addParent(r,n),n[o]=r;return Object.freeze(n),this.refreshParents(e,n),n},remove:function(e,t){var r,o=this,i=this.copyMeta(e);return s.each(e,function(s,n){r=s&&s.__,r&&o.removeParent(s,e),-1==t.indexOf(n)&&(r&&o.addParent(s,i),i[n]=s)}),Object.freeze(i),this.refreshParents(e,i),i},splice:function(e,t){var r,o,i=this,n=this.copyMeta(e),a=t[0],p=a+t[1],c=e.__.notify;if(s.each(e,function(t,r){t&&t.__&&(i.removeParent(t,e),(a>r||r>=p)&&i.addParent(t,n)),n[r]=t}),t.length>1)for(var u=t.length-1;u>=2;u--)o=t[u],r=o&&o.constructor,(r==Array||r==Object)&&(o=this.freeze(o,c)),o&&o.__&&this.addParent(o,n),t[u]=o;return Array.prototype.splice.apply(n,t),Object.freeze(n),this.refreshParents(e,n),n},refresh:function(e,t,r,o){var i,n=this,a=this.copyMeta(e);return s.each(e,function(s,o){s==t&&(s=r),s&&(i=s.__)&&(i.dirty&&(s=n.refresh(s,i.dirty[0],i.dirty[1],!0)),n.removeParent(s,e),n.addParent(s,a)),a[o]=s}),Object.freeze(a),e.__.dirty=!1,o?a:void this.refreshParents(e,a)},fixChildren:function(e,t){var r=this;s.each(e,function(s){if(s&&s.__){if(-1!=s.__.parents.indexOf(e))return r.fixChildren(s);if(1==s.__.parents.length)return s.__.parents=[e];t&&r.removeParent(s,t),r.addParent(e)}})},clean:function(e){return this.refresh(e,__.dirty[0],__.dirty[1],!0)},copyMeta:function(e){var t;t=e.constructor==Array?this.createArray(e.length):Object.create(o.Hash);var r=e.__;return s.addNE(t,{__:{notify:r.notify,listener:r.listener,parents:r.parents.slice(0),dirty:!1}}),t},refreshParents:function(e,t){var r,s=e.__;if(s.listener&&this.trigger(t,"update",t),s.parents.length)for(r=s.parents.length-1;r>=0;r--)0==r?this.refresh(s.parents[r],e,t,!1):this.markDirty(s.parents[r],[e,t]);else s.listener&&s.listener.trigger("immediate",e,t)},markDirty:function(e,t){var r,s=e.__;for(s.dirty=t,r=s.parents.length-1;r>=0;r--)this.markDirty(s.parents[r],t)},removeParent:function(e,t){var r=e.__.parents,s=r.indexOf(t);
-1!=s&&r.splice(s,1)},addParent:function(e,t){var r=e.__.parents,s=r.indexOf(t);-1==s&&(r[r.length]=t)},trigger:function(e,t,r){var o=e.__.listener,i=o.ticking;o.ticking=r,i||s.nextTick(function(){var e=o.ticking;o.ticking=!1,o.trigger(t,e)})},createListener:function(e){var t=e.__.listener;return t||(t=Object.create(i,{_events:{value:{},writable:!0}}),e.__.listener=t),t},createArray:function(){return[].__proto__?function(e){var t=new Array(e);return t.__proto__=o.List,t}:function(e){var t=new Array(e),r=o.arrayMethods;for(var s in r)t[s]=r[s];return t}}()};e.exports=n}])});
//# sourceMappingURL=react-stockcharts.min.js.map